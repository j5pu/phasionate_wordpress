(function(f){var k={init:function(){k.removeOverflowHidden();k.carouselItems();k.bannerSlider();k.rtMediaslider();k.magnificPopup();if(f.fn.kleo_enable_media&&f.fn.mediaelementplayer){f(".kleo-video, .kleo-audio, .video-wrap video","body").kleo_enable_media()}k.initPins();if(kleoFramework.goTop==1){k.goTop()}k.likes();k.progressBar();k.kleoAjaxLogin();k.kleoAjaxLostPass();f(".post-content, .activity-inner, .article-media, article, .kleo-video-embed, .wpb_video_widget").fitVids();if(!m||n.viewport().width>992){k.kleoMenuWidget()}f(".panel-collapse").on("show.bs.collapse",function(){f(".panel-heading a[href='#"+f(this).attr("id")+"'] span.icon-opened").removeClass("hide");f(".panel-heading a[href='#"+f(this).attr("id")+"'] span.icon-closed").addClass("hide")});f(".panel-collapse").on("hide.bs.collapse",function(){f(".panel-heading a[href='#"+f(this).attr("id")+"'] span.icon-opened").addClass("hide");f(".panel-heading a[href='#"+f(this).attr("id")+"'] span.icon-closed").removeClass("hide")});f('a[data-toggle="tab"]').on("shown.bs.tab",function(){f(".kleo-carousel").trigger("updateSizes");n.init()});f(".panel-collapse").on("shown.bs.collapse",function(){f(".kleo-carousel").trigger("updateSizes");n.init()});if(f(".wpb_tour").length){f(".tour_next_slide").click(function(){var o=f(this).closest(".wpb_tour").find("li");var q=o.filter(".active");var p=q.next("li").length?q.next("li").find("a"):o.filter(":first-child").find("a");p.tab("show");return false});f(".tour_prev_slide").click(function(){var o=f(this).closest(".wpb_tour").find("li");var q=o.filter(".active");var p=q.prev("li").length?q.prev("li").find("a"):o.filter(":last-child").find("a");p.tab("show");return false});f(".wpb_tour").each(function(){var r=f(this);var q=function(){var s=r.find("li");var u=s.filter(".active");var t=u.next("li").length?u.next("li").find("a"):s.filter(":first-child").find("a");t.tab("show")};if(r.data("interval")!=0){var p=r.data("interval");var o=setInterval(q,p*1000);f(this).find("li").hover(function(){clearInterval(o)})}})}f(".click-pop").popover({trigger:"click"}).on("click",function(o){o.preventDefault;return false});f(".hover-pop").popover({trigger:"hover focus",html:true});f(".hover-tip").tooltip({trigger:"hover",container:"body"});f(".click-tip").tooltip({trigger:"click",container:"body"});f("a.form-submit").on("click",function(){f(this).closest("form").submit();return false});if((f(".porto-video").length||f(".porto-hosted_video").length)&&(f(".porto-thumb").length||f(".porto-slider").length)){f(".portfolio-items").imagesLoaded(function(){k.portfolioVideo()});b.on("debouncedresize",k.portfolioVideo)}if(f(".porto-video").length){f("iframe").each(function(){var o=f(this);var p="";p=o.attr("src");if(p.indexOf("//www.youtube.com/embed/")>-1){o.attr("src",p+"&autohide=1")}if(p.indexOf("//player.vimeo.com/")>-1){if(p.indexOf("?")>-1){o.attr("src",p+"&title=0&byline=0&portrait=0")}else{o.attr("src",p+"?title=0&byline=0&portrait=0")}}})}},portfolioVideo:function(){f(".porto-video .kleo-video-embed, .porto-hosted_video .mejs-inner").height(function(){var o=f(this).closest(".portfolio-items").find(".portfolio-image img, .kleo-banner-slider img").eq(0);return o.length&&o.height()>0?o.height():"auto"})},notReadyInit:function(){f("#logo_img").imgpreload();f(".responsive-tabs, .nav-pills, .top-menu > ul, #top-social > ul").tabdrop()},kleoMenuWidget:function(){var o=jQuery(".widget_nav_menu ul.sub-menu").parent("li");o.addClass("parent");o.children("a").append('<span class="caret"></span>');o.find(".caret").click(function(){jQuery(this).closest(".parent").children(".sub-menu").stop(true,true).slideToggle("fast");jQuery(this).toggleClass("active");return false})},adjustHeights:function(p){var o=2;if(f(p).height()>f(p).parent().height()||f(p).width()>f(p).parent().width()){f(p).css("font-size",((f(p).css("font-size").substr(0,2)-o))+"px").css("line-height",((f(p).css("font-size").substr(0,2)))+"px");adjustHeights(p)}},removeOverflowHidden:function(){f("body").on("click",function(){if(f("#buddypress .tabdrop").hasClass("open")){f("#buddypress div#item-nav").css("overflow","hidden")}});f(".item-list-tabs .dropdown-toggle").on("click",function(){if(f("#buddypress .tabdrop").hasClass("open")){f("#buddypress div#item-nav").css("overflow","hidden")}else{f("#buddypress div#item-nav").css("overflow","visible")}})},bannerSlider:function(){f(".kleo-banner-slider").animate({opacity:"1"},700);f(".kleo-banner-slider").each(function(){var q=f(this).find(".kleo-banner-items");var p=f(this).find(".kleo-banner-prev");var o=f(this).find(".kleo-banner-next");q.imagesLoaded(function(){q.carouFredSel({responsive:true,circular:false,infinite:true,auto:{play:true,pauseDuration:0,duration:2000},scroll:{items:1,duration:600,easing:"easeInOutExpo",wipe:true},prev:p,next:o,items:{height:"variable",visible:1}})})})},carouselItems:function(){f(".kleo-carousel-items").each(function(){var w=f(this);var y=w.children(".kleo-carousel");var o=w.closest(".kleo-carousel-container").find(".carousel-arrow .carousel-prev");var p=w.closest(".kleo-carousel-container").find(".carousel-arrow .carousel-next");var q=w.closest(".kleo-carousel-container").find(".kleo-carousel-pager");var v,z="auto",s=null,u=false,r="resume",x="scroll",t=2000;if(w.data("pager")){q=w.closest(".kleo-carousel-container").find(w.data("pager"))}if(w.data("autoplay")){u=true}if(w.data("speed")){t=parseInt(w.data("speed"))}if(w.data("items-height")){z=w.data("items-height")}if(w.data("items-width")){s=w.data("items-width")}if(w.data("scroll-fx")){x=w.data("scroll-fx")}if(w.data("min-items")&&w.data("max-items")){v={min:w.data("min-items"),max:w.data("max-items")}}y.imagesLoaded(function(){y.carouFredSel({responsive:true,width:"100%",pagination:q,prev:o,next:p,auto:{play:u,pauseOnHover:r},swipe:{onTouch:true},scroll:{items:1,duration:600,fx:x,easing:"swing",timeoutDuration:t,wipe:true},items:{width:s,height:z,visible:v}}).visible()})});if(f(".kleo-thumbs-carousel").length){f(".kleo-thumbs-carousel").each(function(){var q=f(this),p=6,o=false;if(q.data("min-items")&&q.data("max-items")){p={min:q.data("min-items"),max:q.data("max-items")}}if(q.data("circular")){o=true}q.imagesLoaded(function(){q.carouFredSel({responsive:true,circular:o,infinite:true,auto:false,prev:{button:function(){return f(this).parents(".kleo-gallery").find(".kleo-thumbs-prev")}},next:{button:function(){return f(this).parents(".kleo-gallery").find(".kleo-thumbs-next")}},swipe:{onMouse:true,onTouch:true},scroll:{items:1},items:{height:"auto",visible:p,}})})})}f(".kleo-thumbs-carousel a").click(function(){f(this).closest(".kleo-gallery-container").find(".kleo-gallery-image").trigger("slideTo","#"+this.href.split("#").pop());f(".kleo-thumbs-carousel a").removeClass("selected");f(this).addClass("selected");return false});if(f(".kleo-gallery-image").length){f(".kleo-gallery-image").carouFredSel({responsive:true,circular:false,auto:false,items:{height:"variable",visible:1},scroll:{items:1,fx:"crossfade"}})}},rtMediaslider:function(){f(".rtmedia-activity-container").append('<div class="activity-feed-prev">&nbsp;</div><div class="activity-feed-next">&nbsp;</div>');f(".rtmedia-activity-container").each(function(){var p=f(this).find(".activity-feed-prev");var o=f(this).find(".activity-feed-next");var q=f(this).find(".large-block-grid-3");q.imagesLoaded(function(){q.carouFredSel({responsive:true,circular:false,auto:{play:true,pauseDuration:0,duration:2000},scroll:{items:1,duration:600,easing:"easeInOutExpo",wipe:true},swipe:{onTouch:true},prev:p,next:o,items:{height:"auto",visible:{min:1,max:4}}})})})},initPins:function(){f(".kleo-pin-circle, .kleo-pin-poi, .kleo-pin-icon").each(function(){var o="";if(f(this).is("[data-top]")){f(this).css({top:f(this).attr("data-top")+o})}if(f(this).is("[data-left]")){f(this).css({left:f(this).attr("data-left")+o})}if(f(this).is("[data-right]")){f(this).css({right:f(this).attr("data-right")+o})}if(f(this).is("[data-bottom]")){f(this).css({bottom:f(this).attr("data-bottom")+o})}})},goTop:function(){f(window).scroll(function(){if(f(this).scrollTop()>500){f(".kleo-go-top, .kleo-quick-contact-wrapper").removeClass("off").addClass("on")}else{f(".kleo-go-top, .kleo-quick-contact-wrapper").removeClass("on").addClass("off")}});f(".kleo-go-top, .divider-go-top").click(function(){f("html, body").animate({scrollTop:1},800);return false});f(".kleo-classic-comments").click(function(){f("html, body").animate({scrollTop:f("#comments").offset().top},800)})},prettyPhoto:function(){f("a[data-rel]").each(function(){f(this).attr("rel",f(this).data("rel"))});f("a[rel^='prettyPhoto']").prettyPhoto({animation_speed:"fast",slideshow:false,autoplay_slideshow:false,opacity:0.8,show_title:true,allow_resize:true,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",hideflash:false,wmode:"opaque",autoplay:true,modal:false,overlay_gallery:false,keyboard_shortcuts:true,deeplinking:false,social_tools:false})},magnificPopup:function(){f(".kleo-show-login, .bp-menu.bp-login-nav a, .must-log-in > a").magnificPopup({items:{src:"#kleo-login-modal",type:"inline",focus:"#username"},preloader:false,mainClass:"kleo-mfp-zoom",callbacks:{beforeOpen:function(){if(f(window).width()<700){this.st.focus=false}else{this.st.focus="#username"}}}});f(".kleo-show-lostpass").magnificPopup({items:{src:"#kleo-lostpass-modal",type:"inline",focus:"#username"},preloader:false,mainClass:"kleo-mfp-zoom",callbacks:{beforeOpen:function(){if(f(window).width()<700){this.st.focus=false}else{this.st.focus="#forgot-email"}}}});f("a[data-rel^='prettyPhoto'], a[rel^='prettyPhoto'], .article-content a[href$=jpg]:has(img), .article-content a[href$=JPG]:has(img), .article-content a[href$=jpeg]:has(img), .article-content a[href$=JPEG]:has(img), .article-content a[href$=gif]:has(img), .article-content a[href$=bmp]:has(img), .article-content a[href$=png]:has(img)").magnificPopup({type:"image",mainClass:"mfp-img-pop",gallery:{enabled:true}});f(".gallery a[href$=jpg], .gallery a[href$=JPG], .gallery a[href$=jpeg], .gallery a[href$=JPEG], .gallery a[href$=png], .gallery a[href$=gif], .gallery a[href$=bmp] :has(img)").parent().magnificPopup({delegate:"a",type:"image",mainClass:"mfp-gallery-pop",navigateByImgClick:true,gallery:{enabled:true,navigateByImgClick:true,preload:[0,1]}})},likes:function(){f(".item-likes").live("click",function(){var o=f(this);if(o.hasClass("liked")){return false}var q=f(this).attr("id"),p=o.find(".item-likes-postfix").text();f.post(kleoFramework.ajaxurl,{action:"item-likes",likes_id:q,postfix:p},function(r){o.html(r).addClass("liked").attr("title",kleoFramework.alreadyLiked)});return false});if(f("body.ajax-item-likes").length){f(".item-likes").each(function(){var o=f(this).attr("id");f(this).load(kleoFramework.ajaxurl,{action:"item-likes",post_id:o})})}},getURLParameters:function(q){var o={};var p=q.indexOf("?");if(p==-1){return o}var t=q.substring(p+1);var s=t.split("&");for(var r=0;r<s.length;r++){var u=s[r].split("=");o[u[0]]=u[1]}return o},progressBar:function(){if(typeof jQuery.fn.waypoint!=="undefined"){f(".vc_progress_bar").waypoint(function(){f(this).find(".vc_single_bar").each(function(o){var q=f(this),p=q.find(".vc_bar"),r=p.data("percentage-value");setTimeout(function(){p.css({width:r+"%"})},o*200)})},{offset:"85%"})}},kleoAjaxLogin:function(){f("form#login_form").on("submit",function(o){f("#kleo-login-result").show().html(kleoFramework.loadingmessage);f.ajax({type:"POST",dataType:"json",url:kleoFramework.ajaxurl,data:{action:"kleoajaxlogin",log:f("form#login_form #username").val(),pwd:f("form#login_form #password").val(),remember:(f("form#login_form #rememberme").is(":checked")?true:false),security:f("form#login_form #security").val()},success:function(p){f("#kleo-login-result").html(p.message);if(p.loggedin==true){if(p.redirecturl==null){document.location.reload()}else{document.location.href=p.redirecturl}}},complete:function(){},error:function(){f("form#login_form","#login_panel").off("submit");f("#login_form").submit()}});o.preventDefault()})},kleoAjaxLostPass:function(){f("#forgot_form").on("submit",function(){f("#kleo-lost-result").show().html(kleoFramework.loadingmessage);f.ajax({url:kleoFramework.ajaxurl,type:"POST",data:{action:"kleo_lost_password",email:f("#forgot-email").val(),},success:function(o){f("#kleo-lost-result").html(o)},error:function(){f("#kleo-lost-result").html("Sorry, an error occurred.").css("color","red")}});return false})}};var g={rehreshID:null,init:function(){f("#buddypress div#item-nav").css("background-image","none");f("body").on("gridloaded",function(){n.applyGridIsotpe(".kleo-isotope");f(".animate-when-almost-visible").kleo_waypoints({offset:"90%"})});f("body").on("bpActivityLoaded",function(){f(".animate-when-almost-visible").kleo_waypoints({offset:"90%"});k.rtMediaslider();f(".activity-inner").fitVids()});if(typeof(rtMediaHook)!="undefined"){rtMediaHook.register("rtmedia_after_gallery_load",function(){f(".el-zero-fade").kleo_waypoints({offset:"90%"})})}if(f(".kleo-notifications-nav").length){f(".navbar").on("click",".kleo-notifications-nav a.mark-as-read",function(o){g.notificationsRead(f(this));o.preventDefault()});if(kleoFramework.bpNotificationsRefresh!="0"){g.notificationsRefresh()}}},notificationsRefresh:function(){g.rehreshID=setInterval(function(){var o={action:"kleo_bp_notifications_refresh",current:f(".kleo-notifications-nav .kleo-notifications").first().text()};f.ajax({url:kleoFramework.ajaxurl,type:"GET",dataType:"json",data:o,success:function(p){if(p.status=="success"){if(p.count=="0"){f(".kleo-notifications-nav .minicart-buttons").hide();f(".kleo-notifications-nav .kleo-notifications").removeClass("new-alert").addClass("no-alert");f(".kleo-notifications-nav .submenu-inner").removeClass("has-notif")}else{f(".kleo-notifications-nav").addClass("kleo-loading");f(".kleo-notifications-nav .kleo-notifications").removeClass("no-alert").addClass("new-alert");f(".kleo-notifications-nav .submenu-inner").addClass("has-notif");f(".kleo-notifications-nav .minicart-buttons").show()}f(".kleo-notifications-nav .kleo-notifications").text(p.count);f(".kleo-notifications-nav .submenu-inner").html(p.data)}else{}},complete:function(){f(".kleo-notifications-nav").removeClass("kleo-loading")}})},kleoFramework.bpNotificationsRefresh)},notificationsRead:function(p){var o={action:"kleo_bp_notification_mark_read"};f.ajax({url:kleoFramework.ajaxurl,type:"GET",dataType:"json",data:o,beforeSend:function(){f(".kleo-notifications-nav").addClass("kleo-loading")},success:function(q){if(q.status=="success"){if(q.count=="0"){f(".kleo-notifications-nav .submenu-inner").html(q.empty);f(".kleo-notifications-nav .minicart-buttons").hide();f(".kleo-notifications-nav .kleo-notifications").removeClass("new-alert").addClass("no-alert");f(".kleo-notifications-nav .submenu-inner").removeClass("has-notif")}else{f(".kleo-notifications-nav .kleo-notifications").removeClass("no-alert").addClass("new-alert");f(".kleo-notifications-nav .submenu-inner").addClass("has-notif");f(".kleo-notifications-nav .minicart-buttons").show()}f(".kleo-notifications-nav .kleo-notifications").text(q.count)}else{}},complete:function(){f(".kleo-notifications-nav").removeClass("kleo-loading")}})}};var a={wooGalItems:[],wooMainImg:f(".woocommerce-main-image"),init:function(){a.productQuickView();a.removeCartProduct();if(f(".kleo-woo-gallery a.zoom").length<2){f(".woo-main-image-nav").hide()}if(f(".kleo-woo-gallery a.zoom").length){a.startMultiGallery();f(".kleo-woo-next").on("click",function(p){p.preventDefault();f(".kleo-thumbs-carousel").trigger("next");if(f(".kleo-woo-gallery a.zoom.selected").nextAll("a.zoom:eq(0)").length){var o=f(".kleo-woo-gallery a.zoom.selected").nextAll("a.zoom:eq(0)");a.setSelected(o)}});f(".kleo-woo-prev").on("click",function(p){p.preventDefault();f(".kleo-thumbs-carousel").trigger("prev");if(f(".kleo-woo-gallery a.zoom.selected").prevAll("a.zoom:eq(0)").length){var o=f(".kleo-woo-gallery a.zoom.selected").prevAll("a.zoom:eq(0)");a.setSelected(o)}})}else{a.startSingleGallery()}},setSelected:function(o){f(".woocommerce-main-image img").attr("src",o.attr("href")).parent("a").attr("href",o.attr("href"));f(".kleo-woo-gallery a.zoom").removeClass("selected");o.addClass("selected");a.updateGalleryItems(o)},startSingleGallery:function(){a.wooMainImg.magnificPopup({type:"image",mainClass:"kleo-mfp-zoom",removalDelay:300,closeOnContentClick:true,image:{verticalFit:false}})},startMultiGallery:function(){a.updateGalleryItems(f(".kleo-woo-gallery a.zoom.selected"));a.wooMainImg.on("click",function(o){o.preventDefault()});a.wooMainImg.magnificPopup({items:a.wooGalItems,type:"image",mainClass:"kleo-mfp-zoom",removalDelay:300,closeOnContentClick:true,gallery:{enabled:true},image:{verticalFit:false}});a.wooMainImg.on("mfpBeforeOpen",function(){f.magnificPopup.instance.items=a.wooGalItems;f.magnificPopup.instance.updateItemHTML()});f(".kleo-woo-gallery a.zoom").on("click",function(o){o.preventDefault();a.setSelected(f(this));return false})},updateGalleryItems:function(p){a.wooGalItems=[{src:p.attr("href")}];var o;f(".kleo-woo-gallery a.zoom:not(.selected)").each(function(){o={src:f(this).attr("href")};a.wooGalItems.push(o)})},productQuickView:function(){f(".navbar, #main").on("click",".quick-view",function(r){var o=f(this);var p=f(this).attr("data-prod");var q={action:"woo_quickview",product:p};f.ajax({url:kleoFramework.ajaxurl,type:"POST",data:q,beforeSend:function(){o.addClass("kleo-loading")},success:function(s){f.magnificPopup.open({mainClass:"kleo-mfp-zoom",items:{src:'<div id="productModal" class="product-modal main-color">'+s+"</div>",type:"inline"}});setTimeout(function(){k.carouselItems();f(".product-modal form").wc_variation_form();f(".product-modal form select").change()},500)},complete:function(){o.removeClass("kleo-loading")}});r.preventDefault()})},removeCartProduct:function(){f(".navbar").on("click",".kleo-minicart a.remove",function(s){var o=f(this),p={action:"kleo_woo_rem_item"},q=k.getURLParameters(o.attr("href"));f.extend(p,q);var r={kleo_item:p.remove_item};delete p.remove_item;f.extend(p,r);f.ajax({url:kleoFramework.ajaxurl,type:"GET",dataType:"json",data:p,beforeSend:function(){f(".shop-drop").addClass("kleo-loading")},success:function(t){f(".kleo-toggle-menu.shop-drop .kleo-toggle-submenu").html(t.cart);f(".kleo-toggle-menu.shop-drop .cart-items > span, .mheader .cart-items > span").html(t.count);if(t.count==""){f(".kleo-toggle-menu.shop-drop .cart-items").removeClass("has-products");f(".kleo-toggle-menu.shop-drop .kleo-notifications").removeClass("new-alert");f(".kleo-toggle-menu.shop-drop .kleo-notifications").addClass("no-alert")}else{f(".kleo-toggle-menu.shop-drop .cart-items").addClass("has-products");f(".kleo-toggle-menu.shop-drop .kleo-notifications").addClass("new-alert");f(".kleo-toggle-menu.shop-drop .kleo-notifications").removeClass("no-alert")}if(f(".widget_shopping_cart_content").length&&t.hasOwnProperty("widget")){f(".widget_shopping_cart_content").replaceWith(t.widget)}},complete:function(){f(".shop-drop").removeClass("kleo-loading")}});s.preventDefault()})}};var n={container:".kleo-isotope, .kleo-masonry",elContainer:f(".kleo-isotope, .kleo-masonry"),init:function(){if(n.elContainer.length>0){n.applyGridIsotpe(n.container)}},applyGridIsotpe:function(o,q){var p=f(o);p.each(function(){var r=f(this);var t;if(r.data("layout")=="fitRows"){t={layoutMode:"fitRows"}}q=typeof q!=="undefined"?true:false;if(q==false){t={}}r.imagesLoaded(function(){r.isotope(t)});f(window).on("debouncedresize",function(){r.isotope(t)});if(r.prev(".filter-wrap").length){var s=r.prev(".filter-wrap");s.on("click","a",function(){var u=f(this).data("filter");f(this).closest("ul").find("li").removeClass("selected");f(this).parent("li").addClass("selected");r.isotope({filter:u});return false})}})},getWidth:function(o){var p;if(n.viewport().width<480){p=o.width()/1}else{if(n.viewport().width<768){p=o.width()/2}else{if(n.viewport().width<992){p=o.width()/2}else{if(n.viewport().width<1200){if(o.closest(".template-page").hasClass("col-sm-12")){p=o.width()/3}else{p=o.width()/2}}else{if(n.viewport().width<1440){if(o.closest(".template-page").hasClass("col-sm-12")){p=o.width()/4}else{p=o.width()/3}}else{if(o.closest(".template-page").hasClass("col-sm-12")){if(o.closest(".section-container").hasClass("container-full")){p=o.width()/6}else{p=o.width()/4}}else{p=o.width()/3}}}}}}return p},viewport:function(){var p=window,o="inner";if(!("innerWidth" in window)){o="client";p=document.documentElement||document.body}return{width:p[o+"Width"],height:p[o+"Height"]}}};var h={spacing:0,initialPos:(f(".kleo-main-header").length&&!f("body").hasClass("navbar-transparent"))?f(".kleo-main-header").offset().top:0,initialSize:(f(".kleo-main-header #logo_img").length&&f(".kleo-main-header #logo_img").height()>10)?f(".kleo-main-header #logo_img").height():88,header:f(".kleo-main-header"),logo:f(".navbar-header .logo img, .navbar-header .logo a"),elements:f(".navbar-header, .kleo-main-header .navbar-collapse > ul > li > a"),init:function(){if(h.header.length){if(f("body.kleo-navbar-fixed.navbar-resize").length){h.resizeLogo()}else{h.initialLineHeight();if(f("body.kleo-navbar-fixed.navbar-transparent").length){var o=b.scrollTop();if(o>40){h.header.addClass("header-scrolled")}else{h.header.removeClass("header-scrolled")}b.scroll(function(){var p=b.scrollTop();if(p>40){h.header.addClass("header-scrolled")}else{h.header.removeClass("header-scrolled")}})}}}if(i.hasClass("kleo-navbar-fixed")){h.enable_sticky()}h.enableRetinaLogo();h.topSocialExpander();if(f(".kleo_ajax_results").length){h.toggleAjaxSearch();h.doAjaxSearch()}if(n.viewport().width>992){f("#header .js-activated").dropdownHover().dropdown()}f(".js-activated").off("click");f("#header .caret").on("click",function(){var p=f(this).closest(".dropdown, .dropdown-submenu");if(p.hasClass("open")){p.removeClass("open")}else{p.addClass("open")}return false});h.dropdownToggle();h.scrollTo()},scrollTo:function(){f('a[href^="#"]').on("click",function(p){var q=h.getRelatedContent(this);var o=0;if(f("body").hasClass("kleo-navbar-fixed")){o+=h.initialSize;if(f("body").hasClass("navbar-resize")){o=o/2}}if(f("#wpadminbar").length){o+=f("#wpadminbar").height()}if(q.length){p.preventDefault();f("html, body").animate({scrollTop:q.offset().top-o},1000)}});f("section").waypoint(function(o){h.getRelatedNavigation(this).parents("li").toggleClass("active",o==="down")},{offset:150}).waypoint(function(o){h.getRelatedNavigation(this).parents("li").toggleClass("active",o==="up")},{offset:function(){return -f(this).height()+100}})},getRelatedContent:function(o){return f(f(o).attr("href"))},getRelatedNavigation:function(o){return f(".kleo-main-header .nav > li a[href=#"+f(o).attr("id")+"]")},initialLineHeight:function(){h.elements.css({lineHeight:h.initialSize+"px"});h.logo.css({maxHeight:h.initialSize+"px"})},resizeLogo:function(){var o=h.elements.filter(":first").height(),p=function(){if(n.viewport().width<992){h.initialLineHeight();return}h.elements=f(".navbar-header, .kleo-main-header .navbar-collapse > ul > li > a");var r=b.scrollTop(),q=0,s=h.initialSize/2;if(r>(h.initialPos)){if(r<(h.initialPos+o/2)){q=o-r+h.initialPos;h.header.removeClass("header-scrolled");f(".btn-buy").removeClass("btn-default")}else{q=(o)/2;h.header.addClass("header-scrolled");f(".btn-buy").addClass("btn-default")}if(q<s){q=s}h.elements.css({lineHeight:q+"px"});h.logo.css({maxHeight:q+"px"})}else{q=h.initialSize;h.logo.css({maxHeight:q+"px"});h.elements.css({lineHeight:q+"px"});f(".btn-buy").removeClass("btn-default");h.header.removeClass("header-scrolled")}};b.scroll(p);f(window).on("debouncedresize",p);p()},enable_sticky:function(){if(f("#wpadminbar").length>0&&parseInt(b.width())>584){h.spacing=f("#wpadminbar").height()}f(".kleo-main-header").sticky({topSpacing:h.spacing})},enableRetinaLogo:function(){if(window.devicePixelRatio>1&&kleoFramework.retinaLogo!=""){var q=f("#logo_img"),p=kleoFramework.retinaLogo,o=88;if(q.height()>0){o=q.height()}if(f(".sticky-wrapper").hasClass("is-sticky")){o=o/2}q.attr("src",p);q.closest(".logo").addClass("retina-logo")}},topSocialExpander:function(){f("#top-social li a").hover(function(){if(!f("#top-social .tabdrop").length||f("#top-social .tabdrop").hasClass("hide")){var o=f(this).children(".ts-text").outerWidth()+52;f(this).stop().animate({width:o},250,"")}},function(){if(f("#top-social .tabdrop").length||f("#top-social .tabdrop").hasClass("hide")){f(this).stop().animate({width:33},250,"")}})},toggleAjaxSearch:function(){f(".search-trigger").click(function(){if(f("#ajax_search_container").hasClass("searchHidden")){f("#ajax_search_container").removeClass("searchHidden").addClass("show_search_pop");f(this).next().find(".ajax_s").focus()}return false})},doAjaxSearch:function(o){var p={delay:350,minChars:3,scope:"body"};this.options=f.extend({},p,o);this.scope=f(this.options.scope);this.body=f("body");this.timer=false;this.doingSearch=false;this.lastVal="";this.request="";this.bind_ev=function(){this.scope.on("keyup",".ajax_s",f.proxy(this.test_search,this));this.body.on("mousedown",f.proxy(this.hide_search,this));f(".ajax_s").on("click focus",function(){var q=f(this).closest(".kleo-search-form").find(".kleo_ajax_results");if(!q.is(":empty")&&f.trim(f(this).val())!=""){q.slideDown("slow")}q.css("opacity","1");f(this).css("opacity","1")});this.body.on("mousedown",function(r){var q=f(r.target);if(!q.is(".kleo_ajax_results, .ajax_s")&&q.closest(".kleo_ajax_results").length==0){f(".kleo-search-form .kleo_ajax_results").css("opacity","0.5").slideUp("slow");f(".kleo-search-form .ajax_s").css("opacity","0.5")}})};this.test_search=function(q){clearTimeout(this.timer);if(f.trim(q.currentTarget.value)==""||f.trim(q.currentTarget.value.length)>=this.options.minChars){this.timer=setTimeout(f.proxy(this.search,this,q),this.options.delay)}};this.hide_search=function(r){var q=f(r.target);if(!q.is("#ajax_search_container")&&q.parents("#ajax_search_container").length==0){f("#ajax_search_container").addClass("searchHidden").removeClass("show_search_pop")}};this.search=function(w){var s=w.currentTarget;var v=this,u=f(s).closest("form"),t=f(s).closest(".kleo-search-wrap"),r=t.find(".kleo_ajax_results"),x=t.find(".kleo-ajax-search-loading"),q=u.serialize();q+="&action=kleo_ajax_search";if(!r.length){return}if(v.doingSearch===true){this.request.abort()}if(this.lastVal==f.trim(s.value)){r.slideDown();return}if(f.trim(s.value)==""){r.slideUp("fast");return}this.lastVal=f.trim(s.value);this.request=f.ajax({url:kleoFramework.ajaxurl,type:"POST",data:q,beforeSend:function(){x.css("display","inline-block");v.doingSearch=true},success:function(y){if(y==0){y=""}if(r.is(":empty")){r.hide().html(y).slideDown("slow")}else{r.html(y).slideDown("slow")}},complete:function(){x.css("display","none");v.doingSearch=false;clearTimeout(v.timer)}})};this.bind_ev()},dropdownToggle:function(){f(".navbar").on("mouseenter",".kleo-toggle-menu",function(){clearTimeout(f(this).data("timeout"));f(this).find(".kleo-toggle-submenu").fadeIn(50)});f(".navbar").on("mouseleave",".kleo-toggle-menu",function(){var p=f(this);var o=setTimeout(function(){p.find(".kleo-toggle-submenu").fadeOut(50)},400);f(this).data("timeout",o)})}};var e={init:function(){if(b.width()>480){f(".bg-parallax").each(function(){var o=f(this);b.scroll(function(){var p=-((b.scrollTop()-o.offset().top)/(o.data("prlx-speed")*100));var q="50% "+p+"px";o.css({backgroundPosition:q})})});e.changeSizes()}},changeSizes:function(){f(".bg-full-video video").on("loadedmetadata",function(){var v,p,s,u=f(this),r=u.closest(".bg-full-video").find(".section-container"),q=this.videoWidth,t=this.videoHeight,o=q/t;(v=function(){var x=r.width();var y=r.height();var w=x/y;var z=o/w;if(w<o){u.css({width:x*z+"px"})}else{u.css({width:x+"px"})}})();b.on("debouncedresize",v)})}};f(".kleo-quick-contact-wrapper").click(function(o){if(o.stopPropagation){o.stopPropagation()}else{if(window.event){window.event.cancelBubble=true}}});f("html").click(function(){f(this).find("#kleo-quick-contact").fadeOut(300);f(".kleo-quick-contact-link").removeClass("quick-contact-active")});f(".kleo-quick-contact-link").on("click",function(){if(!f(this).hasClass("quick-contact-active")){f("#kleo-quick-contact").fadeIn(300);f(this).addClass("quick-contact-active")}else{f("#kleo-quick-contact").fadeOut(300);f(this).removeClass("quick-contact-active")}return false});f(".kleo-contact-form").submit(c);function c(){var o=f(this);var p=o.serialize();o.find(".kleo-contact-success").html("");o.find(".kleo-contact-loading").show();f.ajax({type:"POST",url:kleoFramework.ajaxurl,data:p,success:function(q){o.find(".kleo-contact-loading").hide();o.find(".kleo-contact-success").html(q)},error:function(q){alert(q)}});return false}f.fn.kleo_enable_media=function(o){var p={};var o=f.extend(p,o);return this.each(function(){var q=f(this);q.mediaelementplayer({defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,audioWidth:"100%",audioHeight:30,startVolume:0.8,loop:false,enableAutosize:true,features:["playpause","progress","duration","volume","fullscreen"],alwaysShowControls:false,iPadUseNativeControls:false,iPhoneUseNativeControls:false,AndroidUseNativeControls:false,alwaysShowHours:false,showTimecodeFrameCount:false,framesPerSecond:25,enableKeyboard:true,pauseOtherPlayers:true,keyActions:[],})})};f.fn.visible=function(){return this.css("visibility","visible")};f.fn.invisible=function(){return this.css("visibility","hidden")};f.fn.visibilityToggle=function(){return this.css("visibility",function(p,o){return(o=="visible")?"hidden":"visible"})};var b=jQuery(window),i=jQuery("body"),d=navigator.userAgent.toLowerCase(),m=d.match(/(iphone|ipod|ipad|android|iemobile)/);var j={init:function(){k.init();h.init();e.init();n.init();g.init();a.init();activate_waypoints();activate_shortcode_scripts();f("#buddypress div#group-dir-search input[type=text], #buddypress div#members-dir-search input[type=text]").focusin(function(){f(this).closest("form").css("min-width","90%")});f("#buddypress div#group-dir-search input[type=text], #buddypress div#members-dir-search input[type=text]").focusout(function(){f(this).closest("form").css("min-width","60%")})}};var l={init:function(){}};k.notReadyInit();jQuery(document).ready(j.init);jQuery(window).load(l.init)})(jQuery);